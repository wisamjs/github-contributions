{"version":3,"sources":["/source/library-dist.js"],"names":["global","factory","exports","module","require","define","amd","MyLibrary","express","request_promise","cheerio","this","getTextFromElement","$","text","toInt","str","isInt","cleanStr","replace","parseInt","x","getContributions","html","load","map","toArray","getYearContributions","githubScraper","app","port","get","req","res","userId","params","then","data","json","listen","index"],"mappings":"CAAC,SAAUA,EAAQC,GACE,gBAAZC,UAA0C,mBAAXC,QAAyBA,OAAOD,QAAUD,EAAQG,QAAQ,WAAYA,QAAQ,mBAAoBA,QAAQ,YAC9H,kBAAXC,SAAyBA,OAAOC,IAAMD,QAAQ,UAAW,kBAAmB,WAAYJ,GAC/FD,EAAOO,UAAYN,EAAQD,EAAOQ,QAASR,EAAOS,gBAAiBT,EAAOU,UAC1EC,KAAM,SAAUH,EAASC,EAAiBC,GAAW,YAKrD,SAASE,KACP,MAAOC,GAAEF,MAAMG,OAGjB,QAASC,GAAMC,GAEb,GAAIC,EAAMD,GACR,MAAOA,EAGT,IAAIE,GAAWF,EAAIG,QAAQ,MAAO,GAClC,OAAOC,UAASF,EAAU,IAG5B,QAASD,GAAMI,GACb,MAAoB,gBAANA,GAGhB,QAASC,GAAiBC,GAExB,MADAV,GAAIH,EAAQc,KAAKD,GACVV,EAAE,mBAAmBY,IAAIb,GAAoBc,UAAUD,IAAIV,GAGpE,QAASY,MAzBT,GAAId,GA6BAe,GACAN,iBAAkBA,EAClBK,qBAAsBA,GAItBE,EAAMrB,IACNsB,EAAO,IAETD,GAAIE,IAAI,yBAA0B,SAAUC,EAAKC,GAC/C,GAAIC,GAASF,EAAIG,OAAOD,MAExBzB,GAAgB,qBAAuByB,GACpCE,KAAKR,EAAcN,kBACnBc,KAAK,SAAUC,GAEdJ,EAAIK,KAAKD,OAIfR,EAAIU,OAAOT,EAIX,IAAIU,GAAQX,CAEd,OAAOW","file":"library-dist.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('express'), require('request-promise'), require('cheerio')) :\n  typeof define === 'function' && define.amd ? define(['express', 'request-promise', 'cheerio'], factory) :\n  global.MyLibrary = factory(global.express, global.request_promise, global.cheerio)\n}(this, function (express, request_promise, cheerio) { 'use strict';\n\n  'use strict';\n  var $;\n\n  function getTextFromElement() {\n    return $(this).text();\n  }\n\n  function toInt(str) {\n\n    if (isInt(str)) {\n      return str;\n    }\n\n    var cleanStr = str.replace(/\\D/g, '');\n    return parseInt(cleanStr, 10);\n  }\n\n  function isInt(x) {\n    return typeof x === 'number';\n  }\n\n  function getContributions(html) {\n    $ = cheerio.load(html);\n    return $('.contrib-number').map(getTextFromElement).toArray().map(toInt);\n  }\n\n  function getYearContributions() {\n\n  }\n\n  var githubScraper = {\n      getContributions: getContributions,\n      getYearContributions: getYearContributions\n    };\n\n  'use strict';\n  var app = express();\n  var port = 8081;\n\n    app.get('/contributions/:userId', function (req, res) {\n      var userId = req.params.userId;\n\n      request_promise('http://github.com/' + userId)\n        .then(githubScraper.getContributions)\n        .then(function (data) {\n          //TODO: data should be valid JSON\n          res.json(data);\n        });\n    });\n\n    app.listen(port);\n\n\n    //Expose app\n    var index = app;\n\n  return index;\n\n}));\n"],"sourceRoot":"/source/"}